import{b as u,Q as S}from"./QCard.be06208f.js";import{f as C,e as Q,Q as D,h as p,i as P}from"./session-store.39964190.js";import{r as d,o as h,z as k,A as B,B as l,C as a,M as c,N,H as m,O as b}from"./index.8e38fdf6.js";import{Q as x}from"./QCardActions.5f606367.js";import{Q as A}from"./QPage.0195c552.js";import"./use-id.4a621d27.js";const z=Object.assign({name:"SettingsPage"},{__name:"SettingsPage",setup(U){const s=C(),i=Q(),r=d(0),o=d(0),g=d(i.name),n=d(!1);async function w(){await i.updateName(g.value),await s.saveSettings({pricePerCigarette:r.value,cigarettesPerDay:o.value}),b.create({message:"Einstellungen gespeichert!",color:"primary"})}function y(){n.value=!0}async function V(){await s.clearSettings(),await i.clearSessions(),await v(),localStorage.clear(),b.create({message:"Alle Daten werden gel\xF6scht!",color:"red",spinner:!0}),n.value=!1,setTimeout(()=>{window.location.reload()},1e3)}async function v(){if(i.name){await s.initSettings();const f=await s.fetchSettings();r.value=f.pricePerCigarette,o.value=f.cigarettesPerDay}}return h(async()=>{await v()}),(f,t)=>(k(),B(A,{class:"q-pa-md"},{default:l(()=>[a(S,null,{default:l(()=>[a(u,null,{default:l(()=>t[5]||(t[5]=[c("div",{class:"text-h6"},"Einstellungen",-1)])),_:1}),a(u,null,{default:l(()=>[a(D,{class:"q-gutter-md",onSubmit:N(w,["prevent"])},{default:l(()=>[a(p,{filled:"",label:"Username",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),rules:[e=>e&&e.length>0||"Name wird ben\xF6tigt!"],hint:"\xC4nderungen f\xFChren zu anderen Daten, da sie mit dem Namen verkn\xFCpft sind."},null,8,["modelValue","rules"]),a(p,{filled:"",type:"number",label:"Preis pro Zigarette (in \u20AC)",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),rules:[e=>e&&e>0||"Preis muss gr\xF6\xDFer als 0 sein!"]},null,8,["modelValue","rules"]),a(p,{filled:"",type:"number",label:"Zigaretten pro Tag (in St\xFCck)",hint:"Gew\xFCnschtes Limit f\xFCr Erinnerungen",modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),rules:[e=>e&&e>=0||"Zahl muss gr\xF6\xDFer oder gleich 0 sein!"]},null,8,["modelValue","rules"]),a(m,{label:"Speichern",color:"primary",type:"submit"}),a(m,{label:"Alle Daten l\xF6schen",color:"negative",onClick:y})]),_:1})]),_:1})]),_:1}),a(P,{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value=e),persistent:""},{default:l(()=>[a(S,null,{default:l(()=>[a(u,null,{default:l(()=>t[6]||(t[6]=[c("div",{class:"text-h6"},"Best\xE4tigung",-1)])),_:1}),a(u,null,{default:l(()=>t[7]||(t[7]=[c("div",null,"Bist du sicher, dass du alle Daten l\xF6schen m\xF6chtest?",-1)])),_:1}),a(x,{align:"right"},{default:l(()=>[a(m,{label:"Abbrechen",color:"grey",onClick:t[3]||(t[3]=e=>n.value=!1)}),a(m,{label:"L\xF6schen",color:"negative",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{z as default};
